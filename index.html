<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单词列表 | Word Lists</title>
    <style>
        /* 1. 基础变量定义（优先定义，供后续使用） */
        :root {
            /* 背景色 */
            --page-bg: #fef8ed;
            --card-bg: white;
            --sidebar-list-bg: #fef8ed;
            
            /* 文本色 */
            --text-primary: #333;
            --text-secondary: #666;
            --btn-text: #000;
            
            /* 进度条 */
            --progress-bar-bg: #f1f1f1;
            --progress-bar-fill: #ff99cc;
            
            /* 功能按钮 */
            --btn-prev-bg: #cccccc;
            --btn-prev-hover: #999999;
            --btn-show-def-bg: #ff99cc;
            --btn-show-def-hover: #ff6699;
            --btn-next-bg: #42a5f5;
            --btn-next-hover: #1876F3;
            
            /* 侧边栏按钮 */
            --order-toggle-disordered: var(--btn-prev-bg);
            --order-toggle-disordered-hover: var(--btn-prev-bg);
            --order-toggle-ordered: #b7e4c7;
            --list-select-btn-active-bg: var(--card-bg);
            --list-select-btn-active-text: #333;
            
            /* 其他 */
            --border-color: #ccc;
            --shadow-primary: 0 6px 12px rgba(0,0,0,0.05);
            --shadow-secondary: 0 4px 8px rgba(0,0,0,0.02);
            --scrollbar-track: #f1f1f1;
            --scrollbar-thumb: #bbb;
            --scrollbar-thumb-hover: #999;
            
            /* 新增：过渡动画变量（鼠标点击位置、扩散半径） */
            --x: 0px;
            --y: 0px;
            --r: 0px;
        }

        /* 深色模式变量（紧跟基础变量，保持变量统一性） */
        :root.dark {
            /* 为单词列表模态框添加暗模式纯白背景 */
            --modal-dark-bg: rgba(255, 255, 255, 0.1);
            /* 背景色 */
            --page-bg: #2d2b3a;
            --card-bg: #3a384c;
            --sidebar-list-bg: #2d2b3a;
            
            /* 文本色 */
            --text-primary: #f0f0f0;
            --text-secondary: #ddd;
            --btn-text: white;
            
            /* 进度条 */
            --progress-bar-bg: #4a485c;
            --progress-bar-fill: #d64187;
            
            /* 功能按钮 */
            --btn-prev-bg: #555;
            --btn-prev-hover: #777;
            --btn-show-def-bg: #d64187;
            --btn-show-def-hover: #b8326d;
            --btn-next-bg: #2563eb;
            --btn-next-hover: #1d4ed8;
            
            /* 侧边栏按钮 */
            --order-toggle-disordered: var(--btn-prev-bg);
            --order-toggle-disordered-hover: var(--btn-prev-bg);
            --order-toggle-ordered: #166534;
            --list-select-btn-active-bg: #3a384c;
            --list-select-btn-active-text: #fff;
            
            /* 其他 */
            --border-color: #555;
            --shadow-primary: 0 6px 12px rgba(255, 255, 255, 0.05);
            --shadow-secondary: 0 4px 8px rgba(255, 255, 255, 0.02);
            --scrollbar-track: #4a485c;
            --scrollbar-thumb: #666;
            --scrollbar-thumb-hover: #888;
        }

        /* 2. 亮暗模式丝滑过渡动画 */
        /* 禁用默认过渡动画，自定义圆形扩散效果 */
        ::view-transition-old(*) {
            animation: none;
        }
        ::view-transition-new(*) {
            animation: clip 0.4s cubic-bezier(1,0,0,1);
        }
        /* 控制层级：确保新状态在上方 */
        ::view-transition-old(root) {
            z-index: 1;
        }
        ::view-transition-new(root) {
            z-index: 9999;
        }
        /* 深色模式下使用相同的动画（修复闪烁问题） */
        html.dark::view-transition-old(*) {
            animation: none;
        }
        html.dark::view-transition-new(*) {
            animation: clip 0.4s cubic-bezier(1,0,0,1);
        }
        /* 圆形扩散动画：从鼠标点击位置扩散 */
        @keyframes clip {
            from {
                clip-path: circle(0% at var(--x) var(--y));
            }
            to {
                clip-path: circle(var(--r) at var(--x) var(--y));
            }
        }

        /* 3. 全局样式（页面基础结构） */
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--page-bg);
            font-size: 1.2em;
            min-height: 100vh;
            position: relative;
            color: var(--text-primary);
        }

        /* 底部状态样式（全局辅助元素，紧跟body） */
        .page-bottom-status {
            position: fixed;
            bottom: 2px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-secondary);
            font-weight: bold;
            font-size: 0.6rem;
            z-index: 5;
            padding: 0;
            margin: 0;
        }

        /* 3. 按钮样式（全局复用组件，集中管理） */
        /* 3.1 按钮通用样式 */
        .btn-common {
            padding: 10px 10px;
            font-size: 16px;
            border: none;
            border-radius: 15px;
            background-color: var(--card-bg);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: inherit;
            font-weight: bold;
            line-height: 1.2;
            margin: 0;
        }
        .btn-common:hover {
            transform: scale(1.05);
        }

        /* 3.2 浮动按钮（顶部/底部悬浮按钮，如主题切换、侧边栏开关） */
        .btn-floating {
            position: fixed;
            width: 120px;
            z-index: 20;
        }
        .btn-floating:hover {
            box-shadow: var(--shadow-primary);
        }
        /* 浮动按钮位置差异化 */
        .mobile-sidebar-toggle {
            top: 20px;
            left: 20px;
            display: none; /* 初始隐藏，响应式时显示 */
        }
        .theme-switch-btn {
            top: 20px;
            right: 20px;
        }
        .word-list-modal-btn {
            bottom: 20px;
            right: 20px;
        }

        /* 3.3 侧边栏按钮（列表选择、顺序切换） */
        .btn-sidebar {
            width: 100%;
            box-sizing: border-box;
            min-height: 60px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            background-color: var(--sidebar-list-bg);
            color: var(--text-secondary);
        }
        /* 侧边栏按钮交互差异化 */
        .list-select-btn:hover, .list-select-btn.active {
            font-size: 22px;
            background-color: var(--list-select-btn-active-bg);
            color: var(--list-select-btn-active-text);
            box-shadow: var(--shadow-primary);
        }
        .order-toggle-btn:hover, .order-toggle-btn.active {
            font-size: 22px;
            color: var(--text-primary);
            box-shadow: var(--shadow-primary);
        }
        .order-toggle-btn[data-order="disordered"]:hover,
        .order-toggle-btn[data-order="disordered"].active {
            background-color: var(--order-toggle-disordered-hover);
        }
        .order-toggle-btn[data-order="ordered"]:hover,
        .order-toggle-btn[data-order="ordered"].active {
            background-color: var(--order-toggle-ordered);
        }

        /* 3.4 中央卡片功能按钮（上一个、显示释义、下一个） */
        .card-btn-group {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: auto;
            padding-top: 20px;
            flex-wrap: wrap;
        }
        /* 功能按钮尺寸控制 */
        .card-btn-group .btn-common {
            padding: 15px 30px;
            font-size: 20px;
            min-width: 120px;
            max-width: 200px;
            flex: 1;
        }
        /* 功能按钮背景色差异化 */
        #btn-prev-word {
            background-color: var(--btn-prev-bg);
        }
        #btn-prev-word:hover {
            background-color: var(--btn-prev-hover);
        }
        #btn-show-definition {
            background-color: var(--btn-show-def-bg);
        }
        #btn-show-definition:hover {
            background-color: var(--btn-show-def-hover);
        }
        #btn-next-word {
            background-color: var(--btn-next-bg);
        }
        #btn-next-word:hover {
            background-color: var(--btn-next-hover);
        }

        /* 4. 页面核心模块（从左到右、从上到下） */
        /* 4.1 左侧侧边栏 */
        .sidebar-list-selector {
            width: 250px;
            background-color: var(--sidebar-list-bg);
            padding: 20px 0;
            box-shadow: var(--shadow-primary);
            display: flex;
            flex-direction: column;
            gap: 15px;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            z-index: 100;
            transition: transform 0.2s ease;
            opacity: 0.95;
            overflow-y: auto;
        }
        /* 侧边栏内部子元素 */
        .sidebar-list-selector h3,
        .list-select-btn-container,
        .order-switch-group,
        .sidebar-list-info {
            padding-left: 20px;
            padding-right: 20px;
        }
        .sidebar-list-selector h3 {
            color: var(--text-primary);
            margin-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 10px;
            text-align: center;
        }
        .list-select-btn-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            box-sizing: border-box;
        }
        .order-switch-group {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: auto;
            box-sizing: border-box;
        }
        .sidebar-list-info {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            /* 仅显示装饰线，隐藏文字 */
            font-size: 0;
            height: 1px;
            overflow: hidden;
        }

        /* 4.2 中央单词卡片 */
        .central-card-wrapper {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 5;
            padding: 0 20px;
            box-sizing: border-box;
        }
        .central-word-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            box-shadow: var(--shadow-primary);
            width: 100%;
            max-width: 800px;
            padding: 40px 30px;
            margin: 30px 0;
            text-align: center;
            min-height: 500px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }
        /* 卡片顶部（进度条+索引） */
        .card-top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            gap: 20px;
        }
        .progress-bar-wrapper {
            flex-grow: 1;
            height: 10px;
            background-color: var(--progress-bar-bg);
            border-radius: 6px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            background-color: var(--progress-bar-fill);
            width: 0%;
            transition: width 0.2s ease;
        }
        .word-index-counter {
            font-size: 18px;
            color: var(--text-secondary);
            font-weight: 500;
            min-width: 120px;
            text-align: center;
        }
        /* 卡片内容（单词+释义） */
        .current-word {
            font-size: 60px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 30px;
            line-height: 1.2;
            word-break: break-word;
        }
        .definition-container {
            flex-grow: 1;
            overflow-y: auto;
            margin: 10px 0 20px;
            padding: 15px 10px;
            min-height: 180px;
        }
        .current-definition {
            font-size: 28px;
            color: var(--text-secondary);
            line-height: 1.3;
            opacity: 0;
            word-break: break-word;
        }
        .current-definition.visible {
            opacity: 1;
            transition: opacity 0.2s ease;
        }

        /* 5. 特殊模块（弹窗） */
        .word-list-modal {
            display: flex;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px); /* 兼容Safari */
            z-index: 1000;
            justify-content: center;
            align-items: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s ease, visibility 0.2s ease;
        }
        .word-list-modal.active {
            opacity: 1;
            visibility: visible;
        }
        /* 暗模式下弹窗背景 */
        :root.dark .word-list-modal {
            background-color: var(--modal-dark-bg);
        }
        /* 弹窗内容区 */
        .word-list-modal-content {
            background-color: var(--page-bg);
            border-radius: 15px;
            box-shadow: var(--shadow-primary);
            width: 80%;
            max-width: 1200px;
            position: fixed;
            top: 10%;
            bottom: 10%;
            padding: 2%;
            display: flex;
            flex-direction: column;
        }
        .word-list-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2%;
            padding-bottom: 1.5%;
            border-bottom: 1px solid var(--border-color);
        }
        .word-list-modal-title {
            text-align: left;
            font-size: 28px;
            font-weight: bold;
            color: var(--text-primary);
            margin: 0;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
        }
        .close-list-modal-btn {
            background: none;
            border: none;
            font-size: 30px;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 5px;
            transition: color 0.2s ease;
            margin-left: auto;
        }
        .close-list-modal-btn:hover {
            color: var(--text-primary);
        }
        /* 弹窗单词列表区 */
        .word-list-modal-container {
            flex: 1;
            overflow-y: auto;
            padding: 1%;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5%;
            align-content: start;
        }
        .word-list-modal-item {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 1.5%;
            transition: all 0.2s ease;
            cursor: pointer;
        }
        .word-list-modal-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-primary);
        }
        .list-item-word {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .list-item-definition {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        /* 弹窗底部分割线 */
        .word-list-modal-stats {
            margin-top: 1.5%;
            padding-top: 1.5%;
            border-top: 1px solid var(--border-color);
            min-height: 1px;
            font-size: 16px;
            color: var(--text-secondary);
            text-align: center;
        }

        /* 6. 滚动条样式（统一归类，便于查找） */
        /* 侧边栏滚动条 */
        .sidebar-list-selector::-webkit-scrollbar {
            width: 12px;
        }
        .sidebar-list-selector::-webkit-scrollbar-track {
            background: var(--progress-bar-bg);
            border-radius: 6px;
        }
        .sidebar-list-selector::-webkit-scrollbar-thumb {
            background: var(--progress-bar-fill);
            border-radius: 6px;
        }
        .sidebar-list-selector::-webkit-scrollbar-thumb:hover {
            background: var(--btn-show-def-hover);
        }

        /* 单词弹窗滚动条 */
        .word-list-modal-container::-webkit-scrollbar {
            width: 12px;
        }
        .word-list-modal-container::-webkit-scrollbar-track {
            background: var(--progress-bar-bg);
            border-radius: 6px;
        }
        .word-list-modal-container::-webkit-scrollbar-thumb {
            background: var(--progress-bar-fill);
            border-radius: 6px;
        }
        .word-list-modal-container::-webkit-scrollbar-thumb:hover {
            background: var(--btn-show-def-hover);
        }

        /* 释义容器滚动条 */
        .definition-container::-webkit-scrollbar {
            width: 8px;
        }
        .definition-container::-webkit-scrollbar-track {
            background: var(--scrollbar-track);
            border-radius: 6px;
        }
        .definition-container::-webkit-scrollbar-thumb {
            background: var(--scrollbar-thumb);
            border-radius: 6px;
        }
        .definition-container::-webkit-scrollbar-thumb:hover {
            background: var(--scrollbar-thumb-hover);
        }

        /* 7. 响应式设计（按屏幕尺寸从大到小排序） */
        @media (max-width: 1300px) {
            /* 移动端侧边栏显示 */
            .mobile-sidebar-toggle {
                display: flex;
            }
            /* 侧边栏默认隐藏，点击按钮展开 */
            .sidebar-list-selector {
                transform: translateX(-100%);
                width: 280px;
                padding: 20px 0;
                transition: transform 0.2s ease;
            }
            .sidebar-list-selector.mobile-open {
                transform: translateX(0);
            }
            /* 中央卡片调整 */
            .central-card-wrapper {
                padding: 0 15px;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 100%;
            }
            .central-word-card {
                padding: 25px 20px;
                min-height: 400px;
                margin: 20px 0;
            }
            .card-top-bar {
                flex-direction: column;
                gap: 15px;
                margin-bottom: 20px;
            }
            .progress-bar-wrapper {
                width: 100%;
            }
            .word-index-counter {
                text-align: center;
                min-width: auto;
            }
            .current-word {
                font-size: 40px;
                margin-bottom: 20px;
            }
            .current-definition {
                font-size: 22px;
            }
            .definition-container {
                min-height: 150px;
                margin: 5px 0 15px;
            }
            .card-btn-group {
                gap: 15px;
            }
            /* 弹窗调整 */
            .word-list-modal-content {
                width: 80%;
                max-width: 1200px;
                padding: 30px;
                top: 10%;
                bottom: 10%;
            }
            .word-list-modal-container {
                padding: 15px 20px;
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }

        @media (max-width: 1024px) {
            /* 中央卡片调整 */
            .central-word-card {
                padding: 30px 20px;
                min-height: 450px;
            }
            .current-word {
                font-size: 50px;
            }
            .current-definition {
                font-size: 24px;
            }
            /* 按钮调整 */
            .card-btn-group .btn-common {
                padding: 12px 25px;
                font-size: 18px;
                min-width: 100px;
            }
            .btn-floating {
                width: 100px;
                padding: 8px 15px;
                font-size: 14px;
            }
            /* 弹窗调整 */
            .word-list-modal-content {
                width: 85%;
                max-width: none;
                padding: 25px;
                top: 10%;
                bottom: 10%;
            }
            .word-list-modal-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 12px;
            }
            /* 弹窗二次调整（与上方1024px规则合并） */
            .word-list-modal-content {
                width: 85%;
                max-width: none;
                padding: 1.8%;
                top: 80px;
                bottom: 60px;
            }
            .word-list-modal-container {
                padding: 1%;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1.2%;
            }
        }

        @media (max-width: 768px) {
            /* 弹窗调整 */
            .word-list-modal-content {
                width: 90%;
                padding: 1.5%;
                top: 80px;
                bottom: 60px;
            }
            .word-list-modal-container {
                padding: 1%;
                grid-template-columns: 1fr;
                gap: 1.2%;
            }
        }

        @media (max-width: 480px) {
            /* 中央卡片调整 */
            .current-word {
                font-size: 36px;
            }
            .current-definition {
                font-size: 20px;
            }
            .central-word-card {
                padding: 20px 15px;
                min-height: 350px;
            }
            /* 按钮调整 */
            .card-btn-group .btn-common {
                padding: 12px 15px;
                font-size: 16px;
                min-width: 80px;
                max-width: none;
            }
            .card-btn-group {
                gap: 10px;
            }
            .word-index-counter {
                font-size: 16px;
            }
            /* 浮动按钮调整 */
            .btn-floating {
                width: 80px;
                padding: 6px 12px;
                font-size: 12px;
            }
            /* 弹窗调整 */
            .word-list-modal-content {
                width: 95%;
                padding: 1.2%;
                top: 80px;
                bottom: 60px;
            }
            .word-list-modal-container {
                padding: 1%;
                gap: 1.2%;
            }
            .word-list-modal-title {
                font-size: 22px;
            }
        }

        /* 8. 触摸设备优化（最后处理，针对特殊交互） */
        @media (hover: none) and (pointer: coarse) {
            /* 按钮最小高度适配触摸 */
            .btn-common {
                min-height: 44px;
            }
            /* 移除触摸设备上的hover效果 */
            .list-select-btn:hover, .order-toggle-btn:hover {
                font-size: inherit;
                background-color: var(--sidebar-list-bg);
                color: var(--text-secondary);
            }
            .list-select-btn.active:hover, .order-toggle-btn.active:hover {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <!-- 移动端侧边栏按钮 -->
    <button class="btn-common btn-floating mobile-sidebar-toggle" id="mobile-sidebar-toggle">Select</button>
    
    <!-- 主题切换按钮 -->
    <button class="btn-common btn-floating theme-switch-btn" id="theme-switch-btn">Dark</button>
    
    <!-- 单词列表弹窗按钮 -->
    <button class="btn-common btn-floating word-list-modal-btn" id="word-list-modal-btn">Word List</button>
    
    <!-- 单词列表弹窗 -->
    <div class="word-list-modal" id="word-list-modal">
        <div class="word-list-modal-content">
            <div class="word-list-modal-header">
                <h2 class="word-list-modal-title" id="word-list-modal-title">
                    <div style="display: flex; justify-content: space-between; width: 100%; box-sizing: border-box;">
                        <span>${activeList}</span>
                        <span>${wordLists[activeList].length} words</span>
                    </div>
                </h2>
            </div>
            <div class="word-list-modal-container" id="word-list-modal-container">
                <!-- 单词列表内容将通过JavaScript动态生成 -->
            </div>
            <div class="word-list-modal-stats" id="word-list-modal-stats">
                <!-- 统计信息将通过JavaScript动态生成 -->
            </div>
        </div>
    </div>
    
    <!-- 左侧列表选择器 -->
    <div class="sidebar-list-selector" id="sidebar-list-selector">
        <h3>Select Word List</h3>
        <div class="list-select-btn-container">
            <button class="btn-common btn-sidebar list-select-btn active" data-list="Word List 1">Word List 1</button>
            <button class="btn-common btn-sidebar list-select-btn " data-list="Word List 2">Word List 2</button>
            <button class="btn-common btn-sidebar list-select-btn " data-list="Zayn's List">Zayn's List</button>
        </div>
        
        <div class="order-switch-group">
            <button class="btn-common btn-sidebar order-toggle-btn" data-order="disordered">Disordered</button>
            <button class="btn-common btn-sidebar order-toggle-btn active" data-order="ordered">Ordered</button>
        </div>
        <div class="sidebar-list-info">
            <div id="sidebar-list-stats">Word List 1 (82 words)</div>
        </div>
    </div>
    
    <!-- 中央卡片容器 -->
    <div class="central-card-wrapper">
        <div class="central-word-card">
            <div class="card-top-bar">
                <div class="progress-bar-wrapper">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="word-index-counter" id="word-index-counter"></div>
            </div>
            
            <div class="current-word" id="current-word"></div>
            <div class="definition-container">
                <div class="current-definition" id="current-definition"></div>
            </div>
            <div class="card-btn-group">
                <button class="btn-common" id="btn-prev-word">Previous</button>
                <button class="btn-common" id="btn-show-definition">Display Definition</button>
                <button class="btn-common" id="btn-next-word">Next</button>
            </div>
        </div>
    </div>
    
    <!-- 底部状态显示 -->
    <div class="page-bottom-status" id="page-bottom-status"></div>

    <script>
        // 单词列表数据 - 保持原逻辑
        const wordLists = {"Word List 1": [{"word": "bias", "definition": "n.偏见；v.使有偏见；"}, {"word": "analyze", "definition": "vt.分析，分解；"}, {"word": "burden", "definition": "n.担子，重担，负担；vt.给予负担或麻烦；"}, {"word": "urge", "definition": "vt.极力主张，强烈要求；n.刺激，冲动，迫切要求；"}, {"word": "urgent", "definition": "adj.紧急的，迫切的；"}, {"word": "athlete", "definition": "n.运动员；"}, {"word": "justice", "definition": "n.正义，公平，公正；"}, {"word": "justify", "definition": "v.证明...是正当的；"}, {"word": "behave", "definition": "vi.表现；v.表现得体；"}, {"word": "alter", "definition": "v.改变，更改；"}, {"word": "alternative", "definition": "adj.供选择的，选择性的，交替的；n.二中择一，供替代的选择；"}, {"word": "atmosphere", "definition": "n.大气(层)，空气，气氛，环境，大气压；"}, {"word": "hemisphere", "definition": "n.半球；"}, {"word": "catalog", "definition": "n.目录，系列；vt.为...编目录；"}, {"word": "category", "definition": "n.类别，范畴；"}, {"word": "bond", "definition": "n.结合（物），结合力，黏合（剂），联结，束缚，羁绊；"}, {"word": "faculty", "definition": "n.科，系，能力，全体教员，天赋；"}, {"word": "factor", "definition": "n.因素，要素，系数；"}, {"word": "factory", "definition": "n.工厂，制造厂；"}, {"word": "battery", "definition": "n.电池(组)，(器具等的)一组，一套，炮兵连；"}, {"word": "battle", "definition": "n.战斗；v.作战；"}, {"word": "cancer", "definition": "n.癌，癌症，肿瘤；"}, {"word": "alcohol", "definition": "n.酒精，酒；"}, {"word": "basis", "definition": "n.基础，原因，方式；"}, {"word": "database", "definition": "n.数据库，资料库；"}, {"word": "bacteria", "definition": "n.[pl]（[sing]bacterium）细菌；"}, {"word": "serve", "definition": "v.为...服务，供应；"}, {"word": "deserve", "definition": "v.应受，该得，值得；"}, {"word": "reserve", "definition": "n.储备，储存，自然保护区，预备队，缄默，[金融]储备金；vt.储备，保留，预约；vi.预订；"}, {"word": "pioneer", "definition": "n.先锋，拓荒者；vt.开辟，倡导，提倡；vi.作先驱；"}, {"word": "volunteer", "definition": "n.志愿者；vt.志愿；"}, {"word": "reform", "definition": "n.改革，改良，改正；vt.改革，革新，重新组成；vi.重组，改过；adj.改革的，改革教会的；"}, {"word": "former", "definition": "adj.从前的，以前的；"}, {"word": "formula", "definition": "n.公式，方案，配方；"}, {"word": "extreme", "definition": "adj.极端的，极度的，偏激的，尽头的；n.极端，末端，最大程度，极端的事物；"}, {"word": "external", "definition": "a.外部的，外面的，表面上的；"}, {"word": "superior", "definition": "a.较高的，上级的，有优势的，出众的；n.上级，长官；"}, {"word": "junior", "definition": "a.初级的；n.（中学或大学）三年级学生；"}, {"word": "disorder", "definition": "n.混乱，杂乱，骚乱，失调，疾病；"}, {"word": "display", "definition": "n.显示，陈列，炫耀，显示器；vt.显示，夸示；v.显示；"}, {"word": "dispute", "definition": "n.&v.辩论，争论，争吵，争端；"}, {"word": "distract", "definition": "vt.分散（注意力），使分心；"}, {"word": "distribute", "definition": "vt.分配，散布，分开，把...分类；"}, {"word": "discourage", "definition": "v.使气馁，使沮丧，阻碍；"}, {"word": "texture", "definition": "n.质地，纹理，结构，本质，实质；"}, {"word": "acupuncture", "definition": "n.针刺，针灸；"}, {"word": "architecture", "definition": "n.建筑学，建筑风格，建筑式样，架构；"}, {"word": "sculpture", "definition": "n.雕塑，雕刻，刻蚀；vt.雕塑，雕刻，刻蚀；vi.从事雕刻；"}, {"word": "structure", "definition": "n.结构，构造，建筑物；v.构造，建造；"}, {"word": "infrastructure", "definition": "n.基础结构，基础设施；"}, {"word": "leisure", "definition": "a.&n.空闲（的），闲暇（的），悠闲（的），安逸（的）；"}, {"word": "feature", "definition": "n.特征，容貌，特色，特写；v.以...为特色；"}, {"word": "decrease", "definition": "v.减少；"}, {"word": "deplete", "definition": "v.损耗，耗尽，使枯竭；"}, {"word": "detect", "definition": "v.发觉，发现，检定；"}, {"word": "decline", "definition": "v.拒绝，变弱，变小；n.消减；"}, {"word": "depend", "definition": "vi.依赖，依靠，取决于，相信，信赖；"}, {"word": "deposit", "definition": "v.存放，放下，使沉积；n.押金；"}, {"word": "desert", "definition": "v.放弃，离弃；n.沙漠；"}, {"word": "despite", "definition": "prep.不管，尽管，不论；"}, {"word": "detail", "definition": "n.细节，详情；vt.详述，细说；"}, {"word": "default", "definition": "vi.拖欠，不履行，不到场；n.违约，缺席，缺乏，系统默认值；vt.不履行，不参加（比赛等），对...处以缺席裁判；"}, {"word": "desire", "definition": "n.欲望，要求；v.想要，请求；"}, {"word": "declare", "definition": "vt.宣布，声明；"}, {"word": "define", "definition": "vt.定义，详细说明；"}, {"word": "delay", "definition": "n.耽搁，迟滞；v.使延误，使耽搁，延期，推迟；"}, {"word": "deliver", "definition": "v.传送，兑现；vt.发表，接生；"}, {"word": "demonstrate", "definition": "vt.证明，展示，论证；vi.示威；"}, {"word": "determine", "definition": "v.决心，决意，测定，查明；"}, {"word": "familiar", "definition": "a.熟悉的，通晓的，亲近的；n.熟客，密友；"}, {"word": "solar", "definition": "adj.太阳的，太阳系的，日光的；"}, {"word": "nuclear", "definition": "a.核的，核心的，原子能的，核动力的；"}, {"word": "scholar", "definition": "n.学者；"}, {"word": "seminar", "definition": "n.研讨会，研讨班；"}, {"word": "comment", "definition": "n.评论，解释，批评；v.评论；"}, {"word": "mental", "definition": "adj.精神的，智力的，心理上的；"}, {"word": "mention", "definition": "vt.提到，谈到，提及，论及，说起；n.提及，说起；"}, {"word": "remind", "definition": "vt.提醒，使想起；"}, {"word": "document", "definition": "n.文档；vt.记录；"}, {"word": "implement", "definition": "vt.实施，执行，实现，使生效；n.工具，器具，手段；"}, {"word": "monument", "definition": "n.纪念碑，纪念物，不朽的功业（著作）等；"}, {"word": "parliament", "definition": "n.议会，国会；"}], "Word List 2": [{"word": "rival", "definition": "n.竞争者，对手；v.竞争，对抗；a.竞争的；"}, {"word": "thrive", "definition": "vi.繁荣，兴旺，茁壮成长；"}, {"word": "cave", "definition": "n.洞穴；v.挖洞；"}, {"word": "barrel", "definition": "n.桶，一桶的量，大量，枪管，炮管，笔管，汽油桶；vi.快速移动；vt.把...装桶；"}, {"word": "barrier", "definition": "n.路障，障碍；"}, {"word": "circus", "definition": "n.马戏团，杂技团，马戏场，杂技场；"}, {"word": "satellite", "definition": "n.卫星，人造卫星；"}, {"word": "purchase", "definition": "v.买，购买；n.购买的物品；"}, {"word": "purpose", "definition": "n.目的，意向，决心，论题，意义；vt.意欲，企图；"}, {"word": "pursue", "definition": "v.追赶，追求，追踪；"}, {"word": "minimum", "definition": "n.最小值，最小化；adj.最小的；"}, {"word": "minister", "definition": "n.部长，大臣，牧师；vi.执行牧师职务，辅助或伺候某人；"}, {"word": "carbon", "definition": "n.[化]碳(元素符号C)，(一张)复写纸；"}, {"word": "cite", "definition": "vt.引用，传讯，想起，表彰；"}, {"word": "calorie", "definition": "n.卡路里，卡(热量单位)；"}, {"word": "clone", "definition": "n.无性繁殖，克隆，复制品；v.克隆；"}, {"word": "private", "definition": "adj.私人的，私立的；"}, {"word": "privilege", "definition": "n.特权，优待；vt.给与...特权，特免；"}, {"word": "civil", "definition": "adj.全民的，市民的，公民的，国民的，民间的，民事的，根据民法的，文职的，有礼貌的；"}, {"word": "philosophy", "definition": "n.哲学，人生观；"}, {"word": "sophisticated", "definition": "a.老于世故的，(仪器)精密的；"}, {"word": "coast", "definition": "vi.滑行，沿岸航行，不费力地取得成功；vt.沿...岸航行；n.海岸，滑坡；"}, {"word": "campaign", "definition": "n.战役，竞选活动；vi.参加活动；"}, {"word": "version", "definition": "n.版本，形式；"}, {"word": "reverse", "definition": "n.&v.颠倒，倒转，倒退，逆转；"}, {"word": "convert", "definition": "n.被改变宗教信仰的人；v.改变，转化；"}, {"word": "symptom", "definition": "n.症状，征候，征兆；"}, {"word": "syndrome", "definition": "n.综合病征，并存特性；"}, {"word": "prohibit", "definition": "vt.禁止，阻止；"}, {"word": "prompt", "definition": "v.促使，激起；a.立即的，及时的；"}, {"word": "profit", "definition": "n.利润，利益；v.有益；"}, {"word": "intelligent", "definition": "adj.聪明的，有才智的，智能的；"}, {"word": "interview", "definition": "v./n.接见，会见，采访，面试；"}, {"word": "entrepreneur", "definition": "n.企业家，创业人；"}, {"word": "enterprise", "definition": "n.公司，事业单位，进取心；"}, {"word": "interfere", "definition": "vi.干涉，妨碍，打扰；vt.冲突，介入；"}, {"word": "internal", "definition": "adj.内在的，国内的，体内的；"}, {"word": "cognitive", "definition": "adj.认知的，认识的；"}, {"word": "sensitive", "definition": "a.敏感的，体贴的，易生气的，棘手的；"}, {"word": "embrace", "definition": "vt.拥抱，信奉，皈依，包含；vi.拥抱；n.拥抱；"}, {"word": "enthusiasm", "definition": "n.热心，热情，热烈；"}, {"word": "enroll", "definition": "vt.登记，使加入，把...记入名册，使入伍；vi.参加，登记，注册，记入名册；"}, {"word": "envelope", "definition": "n.信封，封套，封皮；"}, {"word": "envelop", "definition": "vt.包封，遮盖，包围；"}, {"word": "ensure", "definition": "v.确保，担保；"}, {"word": "encourage", "definition": "vt.鼓励，支持，助长；"}, {"word": "endure", "definition": "v.忍耐，忍受，容忍；"}, {"word": "enhance", "definition": "v.提高，增加，改善；"}, {"word": "engage", "definition": "v.从事，参与，雇佣，引起···的注意；"}, {"word": "endorse", "definition": "vt.支持，赞同，代言；"}, {"word": "entail", "definition": "v.需要，牵涉，导致；"}, {"word": "merchant", "definition": "n.商人，批发商，店主；adj.商业的，商人的；"}, {"word": "tenant", "definition": "n.承租人，房客，佃户，居住者；vt.租借（常用于被动语态）；"}, {"word": "reluctant", "definition": "adj.不情愿的，勉强的，顽抗的；"}, {"word": "significant", "definition": "adj.有意义的，重大的，重要的；"}, {"word": "recognize", "definition": "v.认识，认出，承认；"}, {"word": "criticize", "definition": "v.批评，评论；"}, {"word": "vulnerable", "definition": "a.脆弱的，易受......伤害的；"}, {"word": "available", "definition": "adj.可用到的，可利用的，有用的，有空的，接受探访的；"}, {"word": "invisible", "definition": "a.隐形的，无形的；"}, {"word": "flexible", "definition": "a.易弯曲的，灵活的；"}, {"word": "responsible", "definition": "a.有责任的，应负责任的；"}, {"word": "setting", "definition": "n.背景，环境，装置；"}, {"word": "regarding", "definition": "prep.关于；"}, {"word": "motivate", "definition": "v.激发，刺激；"}, {"word": "incorporate", "definition": "vt.包含，吸收，体现，把...合并；vi.合并，混合，组成公司；adj.合并的，一体化的，组成公司的；"}, {"word": "illustrate", "definition": "v.为...作插图或图表，说明，阐明；"}, {"word": "navigate", "definition": "v.航海，导航，驾驶；"}, {"word": "indicate", "definition": "vt.指示，指出，象征，表明；"}, {"word": "investigate", "definition": "v.调查，研究；"}, {"word": "stimulate", "definition": "vt.刺激，激励，鼓舞；vi.起刺激作用；"}, {"word": "calculate", "definition": "vt.计算，估计，计划；"}, {"word": "celebrate", "definition": "vt.庆祝，祝贺，表扬，赞美；"}, {"word": "communicate", "definition": "v.交流，沟通，传达；"}, {"word": "dominate", "definition": "vt.控制，支配，占优势，在...中占主要地位；vi.占优势，处于支配地位；"}, {"word": "estimate", "definition": "v./n.估计，估价，评估；"}, {"word": "migrate", "definition": "v.迁移，移居；"}, {"word": "exaggerate", "definition": "v.夸张，夸大；"}, {"word": "ultimate", "definition": "adj.最终的，极限的，根本的；n.终极，根本，基本原则；"}, {"word": "immediate", "definition": "adj.立即的，直接的，最接近的；"}, {"word": "climate", "definition": "n.气候；"}, {"word": "undergraduate", "definition": "n.本科生；"}], "Zayn's List": [{"word": "accommodate", "definition": "vt.容纳，使适应；"}, {"word": "account", "definition": "v.解释，负责；"}, {"word": "affiliate", "definition": "vt.联系，从属；"}, {"word": "alleviate", "definition": "vt.减轻，缓解；"}, {"word": "ambiguous", "definition": "adj.含糊的，不明确的；"}, {"word": "benevolent", "definition": "adj.仁慈的，慈善的；"}, {"word": "bilateral", "definition": "adj.双边的；"}, {"word": "cognitive", "definition": "adj.认知的；"}, {"word": "cohere", "definition": "v.凝聚，团结；"}, {"word": "cohere", "definition": "v.连贯，一致；"}, {"word": "compatible", "definition": "adj.兼容的，和谐的；"}, {"word": "complement", "definition": "vt.补充；n.补充物；"}, {"word": "comprehensive", "definition": "adj.全面的，综合的；"}, {"word": "consensus", "definition": "n.共识，一致意见；"}, {"word": "contemporary", "definition": "adj.当代的；n.同代人；"}, {"word": "controversial", "definition": "adj.有争议的；"}, {"word": "degrade", "definition": "vt.退化，降级；"}, {"word": "deteriorate", "definition": "v.恶化，变坏；"}, {"word": "differentiate", "definition": "v.区分，区别；"}, {"word": "dilemma", "definition": "n.困境，进退两难；"}, {"word": "disseminate", "definition": "vt.传播，散布；"}, {"word": "dubious", "definition": "adj.怀疑的，可疑的；"}, {"word": "elaborate", "definition": "adj.复杂的；v.详细说明；"}, {"word": "empirical", "definition": "adj.经验主义的；"}, {"word": "encompass", "definition": "vt.包含，包括；"}, {"word": "enlighten", "definition": "vt.启蒙，启迪；"}, {"word": "exacerbate", "definition": "vt.使恶化，加剧；"}, {"word": "expend", "definition": "v.花费，消耗；"}, {"word": "exploit", "definition": "vt.开发，利用；"}, {"word": "facet", "definition": "n.方面，侧面；"}, {"word": "facilitate", "definition": "vt.促进，使容易；"}, {"word": "facilitate", "definition": "vt.促进，使容易；"}, {"word": "feasible", "definition": "adj.可行的，可能的；"}, {"word": "globalize", "definition": "vt.全球化；"}, {"word": "gregarious", "definition": "adj.社交的，群居的；"}, {"word": "heterogeneous", "definition": "adj.异质的，不同的；"}, {"word": "hierarchy", "definition": "n.等级制度，层级；"}, {"word": "holistic", "definition": "adj.整体的，全盘的；"}, {"word": "hypothesize", "definition": "v.假设，假定；"}, {"word": "imperative", "definition": "adj.必要的，紧急的；"}, {"word": "implement", "definition": "vt.实施，执行；"}, {"word": "implicate", "definition": "vt.暗示，牵连；"}, {"word": "infrastructure", "definition": "n.基础设施，基础结构；"}, {"word": "initiate", "definition": "v.开始，发起；"}, {"word": "integrate", "definition": "v.整合，使完整；"}, {"word": "intricate", "definition": "adj.复杂的，错综的；"}, {"word": "jeopardize", "definition": "vt.危害，危及；"}, {"word": "jurisdiction", "definition": "n.司法权，管辖权；"}, {"word": "justify", "definition": "vt.证明合理，辩护；"}, {"word": "juvenile", "definition": "adj.青少年的；n.青少年；"}, {"word": "legislate", "definition": "v.立法，制定法律；"}, {"word": "legitimate", "definition": "adj.合法的，合理的；"}, {"word": "lucrative", "definition": "adj.赚钱的，有利可图的；"}, {"word": "magnitude", "definition": "n.巨大，重要性；"}, {"word": "method", "definition": "n.方法，方式；"}, {"word": "mitigate", "definition": "vt.减轻，缓和；"}, {"word": "modernize", "definition": "vt.现代化；"}, {"word": "negligible", "definition": "adj.可忽略的，微不足道的；"}, {"word": "neutral", "definition": "adj.中立的，中性的；"}, {"word": "notify", "definition": "vt.通知，告知；"}, {"word": "notorious", "definition": "adj.臭名昭著的；"}, {"word": "obsolete", "definition": "adj.过时的，淘汰的；"}, {"word": "optimize", "definition": "vt.优化；"}, {"word": "orthodox", "definition": "adj.正统的，传统的；"}, {"word": "paradigm", "definition": "n.范例，模式；"}, {"word": "paradox", "definition": "n.悖论，矛盾；"}, {"word": "perspective", "definition": "n.视角，观点；"}, {"word": "pertinent", "definition": "adj.相关的，切题的；"}, {"word": "premise", "definition": "n.前提，假设；"}, {"word": "prerequisite", "definition": "n.先决条件，前提；"}, {"word": "prioritize", "definition": "vt.优先处理；"}, {"word": "profound", "definition": "adj.深刻的，深远的；"}, {"word": "provide", "definition": "v.供应，提供；"}, {"word": "qualify", "definition": "v.使合格，取得资格；"}, {"word": "quantify", "definition": "v.量化，确定数量；"}, {"word": "reconcile", "definition": "vt.和解，调和；"}, {"word": "redundant", "definition": "adj.多余的，冗余的；"}, {"word": "rehabilitate", "definition": "v.康复，修复；"}, {"word": "rigor", "definition": "n.严格，严密；"}, {"word": "scrutinize", "definition": "vt.仔细检查，监视；"}, {"word": "simultaneous", "definition": "adj.同时的，同步的；"}, {"word": "specify", "definition": "vt.指定，详细说明；"}, {"word": "standardize", "definition": "vt.标准化；"}, {"word": "subordinate", "definition": "adj.下级的；n.下属；"}, {"word": "subsidize", "definition": "vt.补贴，资助；"}, {"word": "substantial", "definition": "adj.大量的，实质的；"}, {"word": "sustain", "definition": "v.维持，支撑；"}, {"word": "tangible", "definition": "adj.有形的，实际的；"}, {"word": "tentative", "definition": "adj.试探性的，暂定的；"}, {"word": "terminate", "definition": "v.终止，结束；"}, {"word": "terminate", "definition": "v.终止，结束；"}, {"word": "transform", "definition": "vt.转变，改革；"}, {"word": "transparent", "definition": "adj.透明的，清晰的；"}, {"word": "ubiquitous", "definition": "adj.普遍存在的；"}, {"word": "unanimous", "definition": "adj.全体一致的；"}, {"word": "underlie", "definition": "vt.构成基础，位于下面；"}, {"word": "undermine", "definition": "vt.逐渐削弱，破坏；"}, {"word": "uniform", "definition": "adj.一致的，统一的；"}, {"word": "utilize", "definition": "vt.利用，使用；"}, {"word": "validate", "definition": "vt.验证，确认；"}, {"word": "verify", "definition": "vt.核实，证明；"}, {"word": "versatile", "definition": "adj.多才多艺的，多功能的；"}, {"word": "viable", "definition": "adj.可行的，能生存的；"}, {"word": "visualize", "definition": "vt.可视化，想象；"}, {"word": "vulnerable", "definition": "adj.易受伤害的，脆弱的；"}, {"word": "warrant", "definition": "vt.证明...合理；n.授权令；"}, {"word": "whereby", "definition": "adv.借以，由此；"}, {"word": "widespread", "definition": "adj.分布广泛的；"}, {"word": "zealous", "definition": "adj.热心的，热情的；"}]};
        const listKeys = Object.keys(wordLists);
        let activeList = listKeys[Math.floor(Math.random() * listKeys.length)];
        let currentWords = wordLists[activeList] || [];
        let currentIndex = 0;
        let isOrdered = true;
        
        // DOM元素 - 与修改后的ID同步
        const themeSwitchBtn = document.getElementById('theme-switch-btn');
        const mobileSidebarToggle = document.getElementById('mobile-sidebar-toggle');
        const sidebarListSelector = document.getElementById('sidebar-list-selector');
        const html = document.documentElement;
        const pageBottomStatus = document.getElementById('page-bottom-status');
        
        // 单词列表弹窗相关元素 - 与修改后的ID同步
        const wordListModalBtn = document.getElementById('word-list-modal-btn');
        const wordListModal = document.getElementById('word-list-modal');
        const wordListModalContainer = document.getElementById('word-list-modal-container');
        const wordListModalTitle = document.getElementById('word-list-modal-title');
        const wordListModalStats = document.getElementById('word-list-modal-stats');
        
        console.log('Word lists loaded:', Object.keys(wordLists));
        console.log('Current words:', currentWords);

        // ========== 主题功能（核心修改：丝滑过渡） ==========
        // 初始化主题 - 逻辑不变，仅修改元素变量名
        function initTheme() {
            if (localStorage.getItem('theme') === 'dark' ||
                (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                html.classList.add('dark');
                themeSwitchBtn.textContent = 'Dark';
            } else {
                html.classList.remove('dark');
                themeSwitchBtn.textContent = 'Light Mode';
            }
        }

        // 新增：计算鼠标位置和扩散半径（用于过渡动画）
        function calculateTransitionParams(e) {
            const x = e.clientX;
            const y = e.clientY;
            // 计算从点击位置到屏幕对角的最大半径（确保动画覆盖全屏）
            const endRadius = Math.hypot(
                Math.max(x, innerWidth - x),
                Math.max(y, innerHeight - y)
            );
            // 设置动画变量（供CSS使用）
            html.style.setProperty('--x', x + 'px');
            html.style.setProperty('--y', y + 'px');
            html.style.setProperty('--r', endRadius + 'px');
        }

        // 主题切换事件（修改核心：加入View Transitions API）
        themeSwitchBtn.addEventListener('click', (e) => {
            // 1. 计算动画参数（鼠标点击位置、扩散半径）
            calculateTransitionParams(e);
            
            // 2. 判断浏览器是否支持View Transitions API（兼容处理）
            if (document.startViewTransition) {
                // 支持：用API包裹主题切换逻辑，实现丝滑过渡
                document.startViewTransition(() => {
                    const isDarkNow = html.classList.contains('dark');
                    if (isDarkNow) {
                        html.classList.remove('dark');
                        localStorage.setItem('theme', 'light');
                        themeSwitchBtn.textContent = 'Light Mode';
                    } else {
                        html.classList.add('dark');
                        localStorage.setItem('theme', 'dark');
                        themeSwitchBtn.textContent = 'Dark Mode';
                    }
                });
            } else {
                // 不支持：降级为原逻辑（无动画）
                const isDarkNow = html.classList.contains('dark');
                if (isDarkNow) {
                    html.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                    themeSwitchBtn.textContent = 'Light Mode';
                } else {
                    html.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                    themeSwitchBtn.textContent = 'Dark Mode';
                }
            }
        });
        
        // ========== 移动端侧边栏功能 ==========
        // 移动端侧边栏切换 - 变量名同步
        mobileSidebarToggle.addEventListener('click', () => {
            sidebarListSelector.classList.toggle('mobile-open');
        });
        
        // 点击侧边栏外部关闭 - 变量名同步
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 1300 && 
                !sidebarListSelector.contains(e.target) && 
                !mobileSidebarToggle.contains(e.target) &&
                sidebarListSelector.classList.contains('mobile-open')) {
                sidebarListSelector.classList.remove('mobile-open');
            }
        });
        
        // 窗口大小变化时调整布局 - 变量名同步
        window.addEventListener('resize', () => {
            if (window.innerWidth > 1300) {
                sidebarListSelector.classList.remove('mobile-open');
            }
        });
        
        // ========== 进度条功能 ==========
        // 更新进度条 - 元素ID同步
        function updateProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            if (currentWords.length > 0) {
                progressBar.style.width = `${((currentIndex + 1) / currentWords.length) * 100}%`;
            } else {
                progressBar.style.width = '0%';
            }
        }
        
        // ========== 列表信息功能 ==========
        // 更新列表统计信息 - 元素ID同步
        function updateListStats() {
            document.getElementById('sidebar-list-stats').textContent = 
                `${activeList} (${currentWords.length} words)`;
        }
        
        // ========== 底部状态功能 ==========
        // 更新底部状态显示 - 变量名同步
        function updateBottomStatus() {
            if (pageBottomStatus) {
                pageBottomStatus.textContent = `${activeList} in ${isOrdered ? 'Order' : 'Disorder'}`;
            }
        }
        
        // ========== 单词列表弹窗功能 ==========
        // 打开单词列表弹窗 - 变量名同步
        function openWordTable() {
            updateWordTable();
            wordListModal.classList.add('active');
        }
        
        // 关闭单词列表弹窗 - 变量名同步
        function closeWordTable() {
            wordListModal.classList.remove('active');
        }
        
        // 更新单词列表弹窗内容 - 元素类名/ID同步
        function updateWordTable() {
            if (!wordListModalContainer) return;
            
            // 清空容器
            wordListModalContainer.innerHTML = '';
            
            // 更新标题，分别显示列表名称和单词数量（左对齐和右对齐）
            // 使用内联样式确保正确对齐，避免被其他CSS覆盖
            wordListModalTitle.innerHTML = `
                <div style="display: flex; justify-content: space-between; width: 100%; box-sizing: border-box;">
                    <span>${activeList}</span>
                    <span>${wordLists[activeList].length} words</span>
                </div>
            `;
            // 确保标题容器本身有足够的宽度
            wordListModalTitle.style.width = '100%';
            wordListModalTitle.style.boxSizing = 'border-box';
            
            // 生成单词列表内容 - 始终使用order模式下的原始顺序
            const words = [...wordLists[activeList]]; // 直接使用原始词表顺序，不进行排序
            
            // 保留底部分隔线但不显示内容
            if (wordListModalStats) {
                // 只需清空内容，样式由CSS统一控制
                wordListModalStats.textContent = '';
                // 确保元素仍然显示
                wordListModalStats.style.display = 'block';
            }
            
            words.forEach((wordObj, index) => {
                const wordItem = document.createElement('div');
                wordItem.className = 'word-list-modal-item'; // 类名同步
                wordItem.innerHTML = `
                    <div class="list-item-word">${wordObj.word}</div> <!-- 类名同步 -->
                    <div class="list-item-definition">${wordObj.definition}</div> <!-- 类名同步 -->
                `;
                
                // 点击单词项可以快速跳转到该单词 - 逻辑不变
                wordItem.addEventListener('click', () => {
                    if (isOrdered) {
                        currentIndex = index;
                    } else {
                        // 在乱序模式下，找到该单词在currentWords中的实际位置
                        const actualIndex = currentWords.findIndex(w => w.word === wordObj.word);
                        if (actualIndex !== -1) {
                            currentIndex = actualIndex;
                        }
                    }
                    displayCurrentWord();
                    closeWordTable();
                });
                
                wordListModalContainer.appendChild(wordItem);
            });
            
            // 更新统计信息
            wordListModalStats.textContent = ''; // 清空内容，只保留装饰线
        }
        
        // ========== 单词列表功能 ==========
        // 切换单词列表 - 元素类名同步
        function switchList(listName) {
            console.log('Switching to list:', listName);
            activeList = listName;
            currentWords = wordLists[activeList] || [];
            currentIndex = 0;
            
            // 更新按钮激活状态 - 类名同步为.list-select-btn
            document.querySelectorAll('.list-select-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.list === listName);
            });
            
            // 更新显示 - 逻辑不变
            updateListStats();
            updateProgressBar();
            updateBottomStatus();
            
            // 加载单词 - 逻辑不变
            if (currentWords.length === 0) {
                document.getElementById('current-word').textContent = 'No words in this list';
                document.getElementById('current-definition').innerHTML = '';
                document.getElementById('word-index-counter').textContent = '';
            } else {
                currentWords = isOrdered ? [...currentWords] : [...currentWords].sort(() => Math.random() - 0.5);
                displayCurrentWord();
            }
            
            updateButtonStates();
        }
        
        // 切换顺序/随机模式 - 元素类名同步
        function setOrder(orderType) {
            isOrdered = orderType === 'ordered';
            // 类名同步为.order-toggle-btn
            document.querySelectorAll('.order-toggle-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.order === orderType);
            });
            
            updateBottomStatus();
            switchList(activeList);
        }
        
        // ========== 按钮状态管理 ==========
        // 更新按钮状态 - 元素ID同步
        function updateButtonStates() {
            const prevBtn = document.getElementById('btn-prev-word');
            const nextBtn = document.getElementById('btn-next-word');
            const showBtn = document.getElementById('btn-show-definition');
            const hasWords = currentWords.length > 0;
            const wordEl = document.getElementById('current-word');
            const isCompleted = wordEl && wordEl.textContent === 'Congratulations!';
            
            // 处理上一个按钮 - 逻辑不变
            if (prevBtn) {
                prevBtn.disabled = currentIndex === 0 || !hasWords;
                prevBtn.style.opacity = (currentIndex === 0 || !hasWords) ? '0.5' : '1';
                prevBtn.style.cursor = (currentIndex === 0 || !hasWords) ? 'not-allowed' : 'pointer';
            }
            
            // 处理下一个按钮 - 仅在完成状态时禁用
            if (nextBtn) {
                nextBtn.disabled = isCompleted;
                nextBtn.style.opacity = nextBtn.disabled ? '0.5' : '1';
                nextBtn.style.cursor = nextBtn.disabled ? 'not-allowed' : 'pointer';
            }
            
            // 处理显示定义按钮 - 在完成状态时禁用
            if (showBtn) {
                showBtn.disabled = isCompleted;
                showBtn.style.opacity = isCompleted ? '0.5' : '1';
                showBtn.style.cursor = isCompleted ? 'not-allowed' : 'pointer';
                // 非完成状态时保持文本为'Display Definition'
                if (!isCompleted) {
                    showBtn.textContent = 'Display Definition';
                }
            }
        }
        
        // ========== 单词显示功能 ==========
        // 显示当前单词 - 元素ID同步
        function displayCurrentWord() {
            const wordEl = document.getElementById('current-word');
            const defEl = document.getElementById('current-definition');
            const counterEl = document.getElementById('word-index-counter');
            const defWrapper = document.querySelector('.definition-container'); // 类名同步
            const showBtn = document.getElementById('btn-show-definition');
            
            if (!wordEl || !defEl || !counterEl) {
                console.error('Required DOM elements not found');
                return;
            }
            
            // 重置释义元素 - 完全清空内容
            defEl.classList.remove('visible');
            defEl.innerHTML = ''; // 清空内容，防止误触
            if (defWrapper) defWrapper.scrollTop = 0;
            
            // 重置显示定义按钮文本
            if (showBtn) {
                showBtn.textContent = 'Display Definition';
            }
            
            if (currentWords.length > 0 && currentIndex < currentWords.length) {
                wordEl.textContent = currentWords[currentIndex].word;
                counterEl.textContent = `Word ${currentIndex + 1} / ${currentWords.length}`;
            } else {
                wordEl.textContent = 'No words available';
                counterEl.textContent = '';
            }
            
            updateProgressBar();
            updateButtonStates();
        }
        
        // 显示/隐藏定义（切换功能） - 逻辑不变
        function showDefinition() {
            const defEl = document.getElementById('current-definition');
            const showBtn = document.getElementById('btn-show-definition');
            const wordEl = document.getElementById('current-word');
            
            // 检查是否处于完成状态（显示Congratulations）
            const isCompleted = wordEl && wordEl.textContent === 'Congratulations!';
            if (isCompleted) {
                // 如果是，不执行任何操作
                return;
            }
            
            if (defEl && currentWords.length > 0 && currentIndex < currentWords.length) {
                // 检查是否已显示
                if (defEl.classList.contains('visible')) {
                    // 如果已显示，则隐藏
                    defEl.classList.remove('visible');
                    defEl.innerHTML = '';
                    if (showBtn) showBtn.textContent = 'Display Definition';
                } else {
                    // 如果未显示，则渲染并显示释义内容
                    const defParts = currentWords[currentIndex].definition.split('；').filter(part => part.trim() !== '');
                    const youdaoLink = `<a href="https://dict.youdao.com/result?word=${encodeURIComponent(currentWords[currentIndex].word)}&lang=en" target="_blank" style="color: var(--btn-show-def-bg); text-decoration: underline;">有道词典</a>`;
                    defParts.push(youdaoLink);
                    defEl.innerHTML = defParts.join('；<br>');
                    defEl.classList.add('visible');
                    if (showBtn) showBtn.textContent = 'Conceal Definition';
                }
            }
        }
        
        // 上一个单词 - 元素ID同步
        function prevWord() {
            const wordEl = document.getElementById('current-word');
            if (!wordEl) return;
            
            // 检查是否正在显示完成信息
            if (wordEl.textContent === 'Congratulations!') {
                // 如果是，直接显示最后一个单词
                currentIndex = currentWords.length - 1;
                displayCurrentWord();
            } else if (currentIndex > 0) {
                currentIndex--;
                displayCurrentWord();
            }
        }
        
        // 下一个单词 - 逻辑不变
        function nextWord() {
            if (currentWords.length > 0) {
                if (currentIndex < currentWords.length - 1) {
                    currentIndex++;
                    displayCurrentWord();
                } else {
                    // 已经是最后一个单词，显示完成信息
                    const wordEl = document.getElementById('current-word');
                    const defEl = document.getElementById('current-definition');
                    const counterEl = document.getElementById('word-index-counter');
                    
                    if (wordEl && defEl && counterEl) {
                        wordEl.textContent = 'Congratulations!';
                        defEl.innerHTML = `You have completed ${activeList}!`;
                        defEl.classList.add('visible');
                        counterEl.textContent = `100%`;
                        
                        // 更新进度条为100%
                        document.getElementById('progress-bar').style.width = '100%';
                        
                        updateButtonStates();
                    }
                }
            }
        }
        
        // ========== 页面初始化 ==========
        // 页面加载完成后初始化 - 元素类名/ID同步
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, initializing...');
            
            // 初始化主题
            initTheme();
            
            // 初始化显示
            updateListStats();
            updateProgressBar();
            updateButtonStates();
            
            // 绑定列表切换事件 - 类名同步为.list-select-btn
            document.querySelectorAll('.list-select-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    console.log('List button clicked:', btn.dataset.list);
                    switchList(btn.dataset.list);
                });
            });
            
            // 绑定顺序切换事件 - 类名同步为.order-toggle-btn
            document.querySelectorAll('.order-toggle-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    console.log('Order button clicked:', btn.dataset.order);
                    setOrder(btn.dataset.order);
                });
            });
            
            // 绑定功能按钮事件 - 元素ID同步
            const prevBtn = document.getElementById('btn-prev-word');
            const showBtn = document.getElementById('btn-show-definition');
            const nextBtn = document.getElementById('btn-next-word');
            
            if (prevBtn) prevBtn.addEventListener('click', prevWord);
            if (showBtn) showBtn.addEventListener('click', showDefinition);
            if (nextBtn) nextBtn.addEventListener('click', nextWord);
            
            // 绑定单词列表弹窗按钮事件 - 变量名同步
            if (wordListModalBtn) {
                wordListModalBtn.addEventListener('click', openWordTable);
            }
            
            // 已移除关闭按钮，仅保留点击外部关闭功能
            
            // 点击模态框外部关闭单词列表弹窗 - 变量名同步
            wordListModal.addEventListener('click', (e) => {
                if (e.target === wordListModal) {
                    closeWordTable();
                }
            });
            
            // 绑定键盘事件 - 添加返回键关闭侧边栏和单词表
            document.addEventListener('keydown', (e) => {
                if (e.key === ' ' || e.key === 'Enter') {
                    e.preventDefault();
                    showDefinition();
                } else if (e.key === 'ArrowLeft') prevWord();
                else if (e.key === 'ArrowRight') nextWord();
                else if (e.key === 'Escape') {
                    // 关闭单词表
                    closeWordTable();
                    // 关闭移动端侧边栏（电脑模式下默认打开的侧边栏不受影响）
                    if (sidebarListSelector.classList.contains('mobile-open')) {
                        sidebarListSelector.classList.remove('mobile-open');
                    }
                }
            });
            
            // 触摸手势支持 - 逻辑不变
            let touchStartX = 0;
            document.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            document.addEventListener('touchend', (e) => {
                const touchEndX = e.changedTouches[0].screenX;
                const diffX = touchEndX - touchStartX;
                
                if (Math.abs(diffX) > 50) { // 最小滑动距离
                    if (diffX > 0) {
                        prevWord();
                    } else {
                        nextWord();
                    }
                }
            });
            
            // 更新左侧按钮激活状态以匹配随机选择的词表 - 类名同步
            document.querySelectorAll('.list-select-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.list === activeList);
            });
            
            // 默认乱序设置 - 逻辑不变
            isOrdered = false; // 设为乱序模式
            document.querySelector('.order-toggle-btn[data-order="disordered"]').classList.add('active'); // 激活乱序按钮
            document.querySelector('.order-toggle-btn[data-order="ordered"]').classList.remove('active'); // 取消顺序按钮激活
            currentWords = [...wordLists[activeList]].sort(() => Math.random() - 0.5); // 加载乱序单词
            
            // 初始化显示 - 逻辑不变
            if (currentWords.length > 0) {
                displayCurrentWord();
            } else {
                const wordEl = document.getElementById('current-word');
                if (wordEl) {
                    wordEl.textContent = 'No words in this list';
                }
            }
            
            // 初始化底部状态显示 - 逻辑不变
            updateBottomStatus();
            console.log('Initialization complete');
        });
    </script>
</body>
</html>
